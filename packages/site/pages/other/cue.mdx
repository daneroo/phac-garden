# Using cue to validate/generate cloudbuild files

Now the we have 5 cloudbuild.yaml files, lut simplify this with cue.

```bash
#  NOT WORKING YET
cue import -f -o cloudbuilds.cue -l  -l '"build"' -l 'path.Base(filename)' -l 'substitutions._SERVICE_NAME' -p simple-gke-infra ./...
#  NOT WORKING YET
cue import -f -o cloudbuilds.cue  -l '"cloudbuild"' -l 'substitutions."_SERVICE_NAME"' caddy-site/cloudbuild.yaml
```

Start again

```bash
for i in $(find . -name clou\*ml); do echo "---"; cat $i;  done >allbuilds.yaml

cue import -f -p cloudbuild  -l '"cloudbuild"' -l 'substitutions."_SERVICE_NAME"' allbuilds.yaml
cue trim allbuilds.cue
```
